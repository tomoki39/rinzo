# Rinzo（リンゾー）アプリケーション仕様書
## 全世界言語マップ

## 1. プロジェクト概要

### 1.1 サービス名
**Rinzo（リンゾー）** - "Explore the world's knowledge territories"

**名前の由来**: 間宮林蔵（1780-1844）江戸時代の探検家・地理学者から命名

### 1.2 コンセプト
全世界の言語分布を都市・村落レベルで詳細に表示し、知的好奇心を満たす情報提供を行うWebアプリケーション。Google MapsとWikipediaを組み合わせたような、知識探索型のインタラクティブプラットフォーム。

### 1.3 ターゲットユーザー
- **主要ターゲット**: 知的好奇心が旺盛な一般ユーザー
- **セカンダリターゲット**: 言語学研究者・学生、地理学愛好家
- **地域**: 全世界（多言語対応）

### 1.4 目標
- 言語の多様性の可視化
- 直感的な知識探索体験の提供
- 学術的価値と一般向けアクセシビリティの両立

## 2. 基本仕様

### 2.1 表示範囲
- **地理的範囲**: 全世界
- **詳細度**: 都市・村落レベル
- **対応言語**: 日本語、英語（日本語優先、将来的に多言語展開）

### 2.2 基本機能

#### 2.2.1 マップ表示
- インタラクティブな世界地図（ズーム・パン対応）
- 言語分布の色分け表示
- 複数表示モードの切り替え

#### 2.2.2 検索・フィルタ機能
- 言語名による検索
- 言語ファミリー別フィルタ
- 地域別フィルタ
- 話者数範囲での絞り込み

#### 2.2.3 情報表示
- 地域クリック時の詳細情報表示
- 言語情報の段階的表示（基本→詳細）

## 3. 詳細仕様

### 3.1 データ構造

#### 3.1.1 基本情報（常時表示）
```json
{
  "language_id": "jpn",
  "language_name": {
    "native": "日本語",
    "english": "Japanese",
    "alternative_names": ["にほんご", "Nihongo"],
    "local_names": {
      "ja": "日本語",
      "en": "Japanese",
      "zh": "日语",
      "ko": "일본어"
    }
  },
  "speakers": {
    "total": 125000000,
    "native": 125000000,
    "second_language": 0,
    "density_per_km2": 330.5,
    "urban_percentage": 91.5
  },
  "geographic_distribution": {
    "countries": ["JP"],
    "regions": ["関東", "関西", "九州"],
    "coordinates": [
      {"lat": 35.6762, "lng": 139.6503, "area": "東京", "speaker_count": 13000000},
      {"lat": 34.6937, "lng": 135.5023, "area": "大阪", "speaker_count": 8800000}
    ],
    "boundary_polygon": "MULTIPOLYGON(...)",
    "center_point": {"lat": 36.2048, "lng": 138.2529}
  },
  "language_family": {
    "family": "Japonic",
    "branch": "Japanese",
    "subgroup": "Japanese",
    "related_languages": ["ryu", "ain"],
    "genetic_distance": {
      "korean": 0.15,
      "ainu": 0.85
    }
  },
  "status": {
    "endangerment": "Safe",
    "official_status": ["Japan"],
    "vitality_score": 95
  }
}
```

#### 3.1.2 詳細情報（クリック時表示）
```json
{
  "linguistic_features": {
    "writing_systems": [
      {
        "system": "Hiragana",
        "type": "Syllabary",
        "usage": "Native words, grammar",
        "characters": 46
      },
      {
        "system": "Katakana", 
        "type": "Syllabary",
        "usage": "Foreign words, emphasis",
        "characters": 46
      },
      {
        "system": "Kanji",
        "type": "Logographic",
        "usage": "Content words, meaning",
        "characters": 2136
      }
    ],
    "word_order": "SOV",
    "phonology": {
      "vowels": 5,
      "consonants": 14,
      "tones": false,
      "syllable_structure": "CV(C)",
      "stress_pattern": "Mora-timed"
    },
    "morphology": "Agglutinative",
    "grammar_features": {
      "case_marking": true,
      "verb_conjugation": true,
      "honorifics": true,
      "particles": true
    }
  },
  "historical_info": {
    "origin": "日本列島",
    "development_periods": [
      {"period": "古代日本語", "years": "8世紀-12世紀", "characteristics": "万葉仮名使用"},
      {"period": "中古日本語", "years": "12世紀-16世紀", "characteristics": "平仮名・片仮名確立"},
      {"period": "近世日本語", "years": "16世紀-19世紀", "characteristics": "江戸時代の標準語形成"},
      {"period": "現代日本語", "years": "19世紀-現在", "characteristics": "全国共通語の普及"}
    ],
    "dialects": [
      {"name": "標準語", "region": "関東", "speakers": 50000000, "status": "Official"},
      {"name": "関西弁", "region": "関西", "speakers": 20000000, "status": "Vigorous"},
      {"name": "津軽弁", "region": "青森", "speakers": 1000000, "status": "Vulnerable"}
    ],
    "language_contact": [
      {"language": "Chinese", "type": "Lexical borrowing", "period": "5世紀-現在"},
      {"language": "English", "type": "Modern borrowing", "period": "19世紀-現在"}
    ]
  },
  "cultural_context": {
    "official_status": ["Japan"],
    "education": {
      "primary": "Medium of instruction",
      "secondary": "Medium of instruction", 
      "tertiary": "Medium of instruction"
    },
    "media": {
      "print": "Extensive",
      "broadcast": "Extensive",
      "digital": "Extensive"
    },
    "cultural_importance": "High",
    "literature": {
      "written_tradition": "1000+ years",
      "notable_works": ["源氏物語", "万葉集"],
      "modern_literature": "Extensive"
    }
  },
  "statistics": {
    "speaker_growth": {
      "trend": "Stable",
      "annual_change": 0.1
    },
    "age_distribution": {
      "0-17": 0.15,
      "18-64": 0.65,
      "65+": 0.20
    },
    "urban_rural": {
      "urban": 0.915,
      "rural": 0.085
    }
  }
}
```

### 3.2 表示モード

#### 3.2.1 言語ファミリー別表示
- インド・ヨーロッパ語族: 青系 (#3B82F6)
- シナ・チベット語族: 赤系 (#EF4444)
- ニジェール・コンゴ語族: 緑系 (#10B981)
- アフロ・アジア語族: 黄系 (#F59E0B)
- オーストロネシア語族: 紫系 (#8B5CF6)
- アルタイ語族: オレンジ系 (#F97316)
- ドラヴィダ語族: ピンク系 (#EC4899)
- その他: グレー系 (#6B7280)

#### 3.2.2 話者数別表示
- 色の濃淡で話者数を表現
- 10億人以上: 濃い色 (#1F2937)
- 1億人以上: 中程度 (#4B5563)
- 1000万人以上: 薄い色 (#6B7280)
- 100万人以上: 極薄い色 (#9CA3AF)
- 100万人未満: 最も薄い色 (#D1D5DB)

#### 3.2.3 消滅危惧度別表示
- Safe (安全): 緑 (#10B981)
- Vulnerable (脆弱): 黄緑 (#84CC16)
- Definitely Endangered (絶滅危惧): 黄 (#F59E0B)
- Severely Endangered (深刻な絶滅危惧): オレンジ (#F97316)
- Critically Endangered (極度に絶滅危惧): 赤 (#EF4444)
- Extinct (絶滅): グレー (#6B7280)

#### 3.2.4 文字体系別表示
- ラテン文字: 青 (#3B82F6)
- 漢字: 赤 (#EF4444)
- アラビア文字: 緑 (#10B981)
- キリル文字: 紫 (#8B5CF6)
- デーヴァナーガリー文字: オレンジ (#F97316)
- その他: グレー (#6B7280)

#### 3.2.5 方言・変種別表示（新規追加）
- 標準語: 濃い色
- 地域方言: 中程度の色
- 社会方言: 薄い色
- 歴史的変種: 点線表示

#### 3.2.6 話者密度表示（新規追加）
- 人口密度を考慮した話者分布
- 都市部: 濃い色
- 農村部: 薄い色
- 無人地域: 透明

#### 3.2.7 時系列表示（新規追加）
- 歴史的変遷のアニメーション表示
- 年代スライダーによる表示切り替え
- 言語の拡散・縮小の可視化

### 3.3 インタラクション設計

#### 3.3.1 マップ操作
- **ズーム**: マウスホイール、ズームボタン、ダブルクリック
- **パン**: ドラッグ&ドロップ、キーボード矢印キー
- **クリック**: 地域選択で詳細情報表示
- **ホバー**: 言語名と話者数の簡易表示
- **右クリック**: コンテキストメニュー表示
- **マルチタッチ**: ピンチズーム、回転（モバイル）

#### 3.3.2 検索・フィルタ
- **検索バー**: リアルタイム検索、言語名の部分一致、音声検索対応
- **ファミリーフィルタ**: チェックボックス形式、階層表示
- **地域フィルタ**: 大陸・国別選択、地図上での範囲選択
- **話者数フィルタ**: スライダー形式、対数スケール対応
- **文字体系フィルタ**: 複数選択可能
- **消滅危惧度フィルタ**: 段階的選択
- **年代フィルタ**: 時系列スライダー

#### 3.3.3 情報表示
- **サイドパネル**: 詳細情報の表示、折りたたみ可能
- **ポップアップ**: 簡易情報の表示、位置調整機能
- **モーダル**: 詳細情報の全画面表示
- **タブ表示**: 複数言語の同時比較
- **統計パネル**: 選択地域の統計情報

#### 3.3.4 比較機能（新規追加）
- **言語比較**: 最大3言語の同時比較表示
- **地域比較**: 異なる地域の言語分布比較
- **時系列比較**: 異なる年代の比較表示
- **統計比較**: 数値データの並列表示

#### 3.3.5 ブックマーク機能（新規追加）
- **お気に入り保存**: 興味深い地域・言語の保存
- **コレクション作成**: テーマ別の言語コレクション
- **共有機能**: ブックマークのURL共有
- **エクスポート**: データのCSV/JSON出力

#### 3.3.6 統計・分析機能（新規追加）
- **地域統計**: 選択地域の言語統計表示
- **言語密度マップ**: 話者密度の可視化
- **言語多様性指数**: 地域の言語多様性スコア
- **時系列分析**: 言語の変化トレンド表示

## 4. 技術仕様

### 4.1 技術スタック

#### 4.1.1 フロントエンド
- **React 18** + **TypeScript**: UI構築
- **Leaflet** + **React-Leaflet**: 地図表示
- **Tailwind CSS**: スタイリング
- **Zustand**: 状態管理
- **React Query**: データフェッチング
- **i18next**: 多言語対応（日本語・英語）

#### 4.1.2 バックエンド
- **Node.js** + **Express**: API サーバー
- **PostgreSQL** + **PostGIS**: 地理空間データベース
- **Redis**: キャッシュ
- **Prisma**: ORM

#### 4.1.3 データ処理
- **Python**: データ前処理
- **GeoPandas**: 地理データ処理
- **GDAL**: 地理空間データ変換

#### 4.1.4 インフラ
- **Docker**: コンテナ化
- **AWS/Google Cloud**: ホスティング
- **CDN**: 静的アセット配信

### 4.2 データソース

#### 4.2.1 主要データソース
1. **Ethnologue**: 言語データベース（有料API）
2. **UNESCO Atlas**: 消滅危惧言語
3. **Glottolog**: 言語分類・系統
4. **OpenStreetMap**: 地理データ
5. **Wikipedia**: 多言語情報
6. **WALS (World Atlas of Language Structures)**: 言語構造データ
7. **PHOIBLE**: 音韻データベース
8. **ISO 639**: 言語コード標準
9. **SIL International**: 言語調査データ
10. **各大学・研究機関**: 地域別言語調査データ

#### 4.2.2 データ統合戦略
- 複数ソースの統合・検証
- データ品質の向上
- 定期的なデータ更新（四半期ごと）
- データバージョニング管理
- ユーザーフィードバックによるデータ改善
- 機械学習によるデータ補完

#### 4.2.3 データ品質管理
- データ検証ルールの実装
- 異常値の検出・修正
- データソース間の整合性チェック
- ユーザー報告によるデータ修正

### 4.3 パフォーマンス最適化

#### 4.3.1 地図データ最適化
- ズームレベル別の詳細度調整
- タイルベースの地図表示
- データの事前集約

#### 4.3.2 キャッシュ戦略
- Redis による API レスポンスキャッシュ
- CDN による静的アセットキャッシュ
- ブラウザキャッシュの活用

## 5. 開発フェーズ

### 5.1 Phase 1: MVP開発（基本機能）
**期間**: 3-4ヶ月

#### 5.1.1 基本機能
- 世界地図表示（Leaflet）
- 言語ファミリー別色分け
- 基本検索機能
- 地域クリック時の言語情報表示
- レスポンシブデザイン
- 基本的なフィルタリング機能
- 言語詳細情報の表示

#### 5.1.2 データ範囲
- 主要言語1000言語程度
- 国家レベルでの言語分布
- 基本的な言語学的特徴データ

#### 5.1.3 技術実装
- フロントエンド: React + TypeScript + Leaflet + i18next
- バックエンド: Node.js + Express + PostgreSQL
- 基本的なAPI設計
- データベーススキーマ設計
- 日本語・英語の多言語対応

### 5.2 Phase 2: 機能拡張
**期間**: 2-3ヶ月

#### 5.2.1 追加機能
- 詳細情報表示の充実
- 複数表示モード（話者数、消滅危惧度、文字体系）
- 高度なフィルタリング機能
- 比較機能（言語・地域比較）
- ブックマーク機能
- 統計・分析機能

#### 5.2.2 データ拡張
- 言語データ5000言語以上
- 都市・村落レベルでの分布
- 方言・変種データの追加
- 歴史的データの整備

#### 5.2.3 技術実装
- PostGISによる地理空間データ処理
- Redis キャッシュの実装
- API の最適化
- パフォーマンス改善

### 5.3 Phase 3: 最適化・拡張
**期間**: 2-3ヶ月

#### 5.3.1 最適化
- パフォーマンス改善（レスポンス時間短縮）
- データベース最適化（インデックス、クエリ最適化）
- UI/UX改善（ユーザビリティ向上）
- セキュリティ強化
- アクセシビリティ対応

#### 5.3.2 高度な機能
- 時系列表示（アニメーション）
- 音声検索機能
- 多言語UI対応
- オフライン機能（PWA）

#### 5.3.3 将来拡張準備
- 他学問分野への拡張基盤（歴史学、人類学等）
- モバイルアプリ対応準備
- API の外部提供準備
- 教育機関との連携基盤

### 5.4 Phase 4: エコシステム構築（将来）
**期間**: 6ヶ月以上

#### 5.4.1 プラットフォーム拡張
- モバイルアプリ開発（iOS/Android）
- デスクトップアプリ（Electron）
- ブラウザ拡張機能

#### 5.4.2 コミュニティ機能
- ユーザーアカウントシステム
- ソーシャル機能（共有、コメント）
- ユーザー生成コンテンツ
- 教育コンテンツの提供

#### 5.4.3 商用化
- プレミアム機能
- 教育機関向けライセンス
- API の商用提供
- データの商用利用

## 6. UI/UX設計指針

### 6.1 デザイン原則
- **直感的操作**: 迷わずに情報にアクセス
- **視覚的階層**: 重要な情報を優先表示
- **レスポンシブ**: 全デバイスで最適な体験
- **アクセシビリティ**: 多様なユーザーの利用を支援

### 6.2 画面構成
- **ヘッダー**: ロゴ、検索バー、設定
- **メインエリア**: 地図表示
- **サイドパネル**: フィルタ、詳細情報
- **フッター**: データソース、著作権情報

### 6.3 カラーパレット
- **プライマリ**: 深い青（#1e3a8a）
- **セカンダリ**: 緑（#059669）
- **アクセント**: オレンジ（#ea580c）
- **背景**: 白・グレー（#f8fafc, #64748b）
- **成功**: 緑（#10B981）
- **警告**: 黄（#F59E0B）
- **エラー**: 赤（#EF4444）
- **情報**: 青（#3B82F6）

### 6.4 アクセシビリティ
- **WCAG 2.1 AA準拠**: 色覚障害者への配慮
- **キーボードナビゲーション**: 全機能のキーボード操作対応
- **スクリーンリーダー対応**: 適切なARIAラベル
- **多言語対応**: 右から左への言語（アラビア語等）への対応
- **フォントサイズ調整**: ユーザー設定による文字サイズ変更

### 6.5 レスポンシブデザイン
- **モバイルファースト**: モバイル端末を最優先
- **ブレークポイント**: 
  - モバイル: < 768px
  - タブレット: 768px - 1024px
  - デスクトップ: > 1024px
- **タッチ操作**: モバイル端末での直感的な操作
- **画面回転対応**: 縦横どちらでも最適表示

## 7. 品質保証

### 7.1 テスト戦略
- **ユニットテスト**: コンポーネント・関数レベル（Jest + React Testing Library）
- **統合テスト**: API・データベース連携（Supertest）
- **E2Eテスト**: ユーザーフロー全体（Playwright）
- **パフォーマンステスト**: 大量データでの動作確認（Lighthouse）
- **アクセシビリティテスト**: WCAG準拠確認（axe-core）
- **視覚的回帰テスト**: UI変更の検出（Chromatic）

### 7.2 データ品質
- 複数ソースの検証・統合
- 定期的なデータ更新（四半期ごと）
- ユーザーフィードバックによる改善
- データバリデーションルールの実装
- 異常値検出・修正システム

### 7.3 セキュリティ
- **データ保護**: 個人情報の適切な取り扱い
- **API セキュリティ**: レート制限、認証・認可
- **HTTPS**: 全通信の暗号化
- **脆弱性スキャン**: 定期的なセキュリティチェック
- **データバックアップ**: 定期的なバックアップと復旧テスト

## 8. 運用・保守

### 8.1 監視
- **アプリケーション監視**: レスポンス時間、エラー率（New Relic, DataDog）
- **インフラ監視**: サーバーリソース、データベース性能（Prometheus + Grafana）
- **ユーザー行動分析**: 利用状況、人気機能（Google Analytics, Mixpanel）
- **ログ監視**: エラーログ、アクセスログの分析（ELK Stack）
- **アラート**: 異常検知時の自動通知

### 8.2 更新・メンテナンス
- **データ更新**: 四半期ごとの言語データ更新
- **機能改善**: ユーザーフィードバックに基づく改善
- **セキュリティ**: 定期的なセキュリティアップデート
- **パフォーマンス改善**: 継続的な最適化
- **バックアップ**: 日次バックアップ、週次復旧テスト

### 8.3 スケーラビリティ
- **水平スケーリング**: 負荷分散による拡張
- **データベース最適化**: 読み取り専用レプリカの活用
- **CDN活用**: 静的アセットの配信最適化
- **キャッシュ戦略**: 多層キャッシュの実装

## 9. 将来展望

### 9.1 機能拡張
- **他学問分野への拡張**: 歴史学、人類学、考古学等の知識領域
- **AR/VR機能**: 拡張現実・仮想現実での言語体験
- **AI機能**: 機械学習による言語分析・予測
- **ソーシャル機能**: ユーザー間の情報共有・コラボレーション
- **教育機能**: 言語学習コンテンツの提供
- **研究支援**: 学術研究のための分析ツール

### 9.2 プラットフォーム拡張
- **モバイルアプリ**: iOS/Android ネイティブアプリ
- **デスクトップアプリ**: Electron ベースのデスクトップ版
- **API の外部提供**: 開発者向けAPI プラットフォーム
- **教育機関との連携**: 大学・研究機関との協力
- **オープンデータ**: 研究用途でのデータ公開

### 9.3 国際展開
- **多言語UI**: 主要言語でのUI 対応
- **地域特化**: 地域別の特化機能
- **現地パートナー**: 各国の研究機関との連携
- **ローカライゼーション**: 文化的背景を考慮した機能調整

### 9.4 持続可能性
- **オープンソース化**: 一部機能のオープンソース化
- **コミュニティ**: ユーザーコミュニティの構築
- **持続可能な運営**: 収益モデルの確立
- **社会的インパクト**: 言語多様性保護への貢献

---

## 10. 付録

### 10.1 用語集
- **言語ファミリー**: 共通の祖先を持つ言語群
- **話者数**: その言語を話す人の数
- **消滅危惧度**: 言語の存続の危険度を示す指標
- **文字体系**: 言語を書き表すための文字の体系
- **方言**: 同一言語内の地域的変種
- **言語接触**: 異なる言語間の相互作用

### 10.2 参考資料
- Ethnologue: https://www.ethnologue.com/
- UNESCO Atlas of the World's Languages in Danger: http://www.unesco.org/languages-atlas/
- Glottolog: https://glottolog.org/
- WALS: https://wals.info/
- PHOIBLE: https://phoible.org/

### 10.3 技術参考資料
- Leaflet Documentation: https://leafletjs.com/
- PostGIS Documentation: https://postgis.net/
- React Documentation: https://reactjs.org/
- TypeScript Documentation: https://www.typescriptlang.org/

---

**作成日**: 2025年1月
**バージョン**: 2.0
**サービス名**: Rinzo
**リポジトリ**: rinzo
**作成者**: AI Assistant
**最終更新**: 2025年1月
